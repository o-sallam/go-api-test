function prefetchArticle(e,t){e&&"#"!==e&&""!==e&&(t[e]||fetch(`/post-partial-html/${e}`).then(e=>e.ok?e.text():null).then(n=>{n&&(t[e]=n)}))}function prefetchHomePage(e){e.home||fetch("/post-partial-html").then(e=>e.ok?e.text():null).then(t=>{t&&(e.home=t)})}function showSpinner(){let e=document.getElementById("loading-spinner");e&&(e.style.display="flex")}function hideSpinner(){let e=document.getElementById("loading-spinner");e&&(e.style.display="none")}function smoothScrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}document.addEventListener("DOMContentLoaded",function(){let e={},t=document.querySelector("main");t&&(document.body.addEventListener("mouseenter",function(t){let n=t.target.closest('a[href^="/"]');if(n&&n.getAttribute("href")&&"#"!==n.getAttribute("href")){let o=n.getAttribute("href");if("/"===o)prefetchHomePage(e);else{let h=o.replace(/^\//,"");prefetchArticle(h,e)}}},!0),document.body.addEventListener("click",function(n){let o=n.target.closest('a[href^="/"]');if(o&&o.getAttribute("href")&&"#"!==o.getAttribute("href")){n.preventDefault();let h=o.getAttribute("href");if("/"===h)e.home&&!window.checkMainPageRefresh()?(t.innerHTML=e.home,window.history.pushState({},"","/"),smoothScrollToTop()):(showSpinner(),fetch("/post-partial-html").then(e=>e.ok?e.text():null).then(n=>{hideSpinner(),n&&(e.home=n,t.innerHTML=n,window.history.pushState({},"","/"),smoothScrollToTop())}).catch(()=>{hideSpinner()}));else{let r=h.replace(/^\//,"");e[r]?(t.innerHTML=e[r],window.history.pushState({},"","/"+r),smoothScrollToTop()):(showSpinner(),fetch(`/post-partial-html/${r}`).then(e=>e.ok?e.text():null).then(n=>{hideSpinner(),n&&(e[r]=n,t.innerHTML=n,window.history.pushState({},"","/"+r),smoothScrollToTop())}).catch(()=>{hideSpinner()}))}}}),window.addEventListener("popstate",function(){let n=location.pathname.replace(/^\//,"");""===n?e.home&&!window.checkMainPageRefresh()?(t.innerHTML=e.home,smoothScrollToTop()):(showSpinner(),fetch("/post-partial-html").then(e=>e.ok?e.text():null).then(n=>{hideSpinner(),n&&(e.home=n,t.innerHTML=n,smoothScrollToTop())}).catch(()=>{hideSpinner()})):n&&e[n]?(t.innerHTML=e[n],smoothScrollToTop()):n&&(showSpinner(),fetch(`/post-partial-html/${n}`).then(e=>e.ok?e.text():null).then(o=>{hideSpinner(),o&&(e[n]=o,t.innerHTML=o,smoothScrollToTop())}).catch(()=>{hideSpinner()}))}))});
